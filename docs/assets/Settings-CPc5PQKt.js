import{d as V,u as y,a as L,r as _,w as N,c as T,b as n,e as c,f as o,g as p,t as D,s as I,h as s,o as $,i as E,_ as P}from"./index-haKiSfgm.js";import{s as f}from"./function-call-YkSln_pv.js";const R={class:"settings"},U={class:"settings-content"},j={class:"version-text"},q={class:"limit-setting"},z={class:"setting-header"},A={class:"setting-content"},F={class:"setting-footer"},G=V({__name:"Settings",setup(H){const v=y(),{itemsPerPage:l}=L(),g="665cd12",i=_(!1),r=_(String(l.value));N(i,e=>{e&&(r.value=String(l.value))});const h=e=>{if(e==="")return"";const t=parseInt(e);return isNaN(t)?"":t<1?"1":t>10?"10":String(t)},m=()=>{i.value=!1},w=()=>{const e=parseInt(r.value||"1");e>=1&&e<=10?(l.value=e,m(),f("设置已保存")):f("请输入1-10之间的数字")},k=()=>{I({title:"更新提示",message:"是否清除缓存并刷新页面？",confirmButtonText:"立即刷新",cancelButtonText:"取消",showCancelButton:!0}).then(e=>{e==="confirm"&&("caches"in window&&caches.keys().then(t=>{t.forEach(u=>caches.delete(u))}),window.location.reload())})};return(e,t)=>{const u=s("van-nav-bar"),d=s("van-cell"),C=s("van-cell-group"),S=s("van-icon"),b=s("van-field"),x=s("van-button"),B=s("van-popup");return $(),T("div",R,[n(u,{title:"设置","left-arrow":"",onClickLeft:t[0]||(t[0]=a=>c(v).back())}),o("div",U,[n(C,null,{default:p(()=>[n(d,{title:"仓库设置","is-link":"",onClick:t[1]||(t[1]=a=>c(v).push({name:"repoSettings"}))}),n(d,{title:"每页显示条数",value:c(l)+"条","is-link":"",onClick:t[2]||(t[2]=a=>i.value=!0)},null,8,["value"])]),_:1}),o("div",{class:"version-info",onClick:k},[o("span",j,"版本号："+D(c(g)),1)])]),n(B,{show:i.value,"onUpdate:show":t[4]||(t[4]=a=>i.value=a),position:"bottom",round:"",class:"limit-popup","safe-area-inset-bottom":""},{default:p(()=>[o("div",q,[o("div",z,[t[5]||(t[5]=o("span",{class:"title"},"每页显示条数",-1)),n(S,{name:"cross",onClick:m})]),o("div",A,[n(b,{modelValue:r.value,"onUpdate:modelValue":t[3]||(t[3]=a=>r.value=a),type:"number",placeholder:"请输入数量","input-align":"center",formatter:h,class:"limit-input",maxlength:"2"},null,8,["modelValue"])]),o("div",F,[n(x,{block:"",type:"primary",onClick:w},{default:p(()=>t[6]||(t[6]=[E(" 确定 ")])),_:1})])])]),_:1},8,["show"])])}}}),M=P(G,[["__scopeId","data-v-d66e7332"]]);export{M as default};
